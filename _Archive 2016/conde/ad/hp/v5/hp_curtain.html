<html>
<head>

  <meta charset="UTF-8">
  <title>Architectural Digest</title>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src='http://cdnjs.cloudflare.com/ajax/libs/react/0.13.2/react.js'></script>
  
  <script>
  /*!
  Copyright (c) 2015 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/

function classNames () {
  'use strict';

  var classes = '';

  for (var i = 0; i < arguments.length; i++) {
    var arg = arguments[i];
    if (!arg) continue;
    var argtype = typeof arg;

    if ('string' === argtype || 'number' === argtype) {
      classes += ' ' + arg;

    } else if (Array.isArray(arg)) {
      classes += ' ' + classNames.apply(null, arg);

    } else if ('object' === argtype) {
      for (var key in arg) {
        if (arg.hasOwnProperty(key) && arg[key]) {
          classes += ' ' + key;
        }
      }
    }
  }

  return classes.substr(1);
}

$(function () {

      'use strict';

      // Simplest possible mixin to get a global scroll event
      var WindowScrollMixin = {
          componentDidMount: function() {
              window.addEventListener('scroll', this.onScroll, false);
          },
          componentWillUnmount: function() {
              window.removeEventListener('scroll', this.onScroll, false);
          }
      };

      // If we don't get a scroll event within 200 ms, assume the user
      // stopped scrolling.
      var SCROLL_TIMEOUT = 120;
      var CHECK_INTERVAL = SCROLL_TIMEOUT / 6;

      var PageScrollMixin = {

        mixins: [WindowScrollMixin],
        
        checkInterval: null,
        scrolling: false,
        proxiedScrollTime: Date.now(),
        
        componentDidMount: function() {
          this.checkInterval = window.setInterval(this.checkScroll, CHECK_INTERVAL);
          this.scrolling = false;
        },

        componentWillUnmount: function() {
          window.clearInterval(this.checkInterval);
        },

        checkScroll: function() {
          if (Date.now() - this.lastScrollTime > SCROLL_TIMEOUT && this.scrolling) {
            this.scrolling = false;
            this.onScrollEnd();
          }
        },
        
        proxiedScroll: function () {
          if (Date.now() - this.proxiedScrollTime > CHECK_INTERVAL && this.scrolling ) {
            this.proxiedScrollTime = Date.now();
            this.onScrollProxy();
          }
        },

        onScroll: function() {
          if (!this.scrolling) {
            this.scrolling = true;
            this.onScrollStart();
          }
          this.lastScrollTime = Date.now();
          this.proxiedScroll();
        }
      };


      /**
       * Stickybox React component
       * @class
       */
      var Parallax = React.createClass({
        render: function () {
          var size = this.props.children.length;
          var children = React.Children.map(
            this.props.children,
            function(child, idx) {
              var offset = !idx ? 64 : 0;
              var offIndex = size - idx;
              return React.createElement(ParallaxCard, {idx: offIndex, offset: offset}, child);
            }
          );
          return React.createElement('div', {className: 'parallax'}, children);
        }
      });


      /**
       * Stickybox React component
       * @class
       */
      var Stickybox = React.createClass({

        mixins: [PageScrollMixin],

        node: null,
        
        getDefaultProps: function () {
          return {
            offset: 0
          }
        },

        getInitialState: function () {
          return {
            top: 1,
            height: -1,
            scrolling: false
          };
        },
        
        componentDidMount: function () {
          this.node = this.getDOMNode();
          this.updateTopPosition();
        },

        handleScroll: function () {
          this.updateTopPosition();
        },

        updateTopPosition: function () {
          var box = this.node.getBoundingClientRect();
          this.setState({
            top: box.top,
            height: box.height
          });
        },
        
        onScrollStart: function() {
          this.setState({scrolling: true});
          this.handleScroll();
        },
        
        onScrollProxy: function () {
          this.handleScroll();
        },
        
        onScrollEnd: function() {
          this.setState({scrolling: false});
          this.handleScroll();
        },

        getState: function () {
          return this.state;
        },

        isFrozen: function () {
          return this.state.top < (1 + this.props.offset) && this.state.top < (this.props.offset + window.document.body.scrollTop);
        },

        /**
         * Render
         * @returns {ReactElement} react element
         */
        render: function () {
          var args = {}, isFrozen = this.isFrozen();

          args.className = classNames('component-stickybox', {
            frozen: isFrozen
          });
          args.style = {
            height: isFrozen ? this.state.height : 'auto'
          };
          return React.createElement('div', args, 
              this.props.children);
        }
      });

      /**
       * Stickybox React component
       * @class
       */
      var ParallaxCard = React.createClass({

        mixins: [PageScrollMixin],

        node: null,
        
        getDefaultProps: function () {
          return {
            offset: 0
          }
        },

        getInitialState: function () {
          return {
            top: 1,
            height: -1,
            scrolling: false
          };
        },
        
        componentDidMount: function () {
          this.node = React.findDOMNode(this);
          this.updateTopPosition();
        },

        handleScroll: function () {
          this.updateTopPosition();
        },

        updateTopPosition: function () {
          var box = this.node.getBoundingClientRect();
          this.setState({
            top: box.top,
            bottom: box.bottom,
            height: box.height
          });
        },
        
        onScrollStart: function() {
          this.setState({scrolling: true});
          this.handleScroll();
        },
        
        onScrollProxy: function () {
          this.handleScroll();
        },
        
        onScrollEnd: function() {
          this.setState({scrolling: false});
          this.handleScroll();
        },

        getState: function () {
          return this.state;
        },

        isFrozen: function () {
          return this.state.top < (1 + this.props.offset) && this.state.top < (this.props.offset + window.document.body.scrollTop);
        },
        
        isLocked: function () {
          var prev = this.node ? this.node.previousSibling : null;
          var box = {};
          if (prev) {  
            box = prev.getBoundingClientRect();
            return !((box.bottom - this.props.offset) > 0);
          }
          
          return false;
        },


        /**
         * Render
         * @returns {ReactElement} react element
         */
        render: function () {
          /*
          fixed position by default, switch to absolute and set top position 
          from the previous height
          */
          var args = {}, isFrozen = this.isFrozen(), name = {}, isLocked = this.isLocked();
          var cardname = 'card' + this.props.idx;
          name[cardname] = isLocked;
          
          args.className = classNames('component-parallax-card', {
              card: !(this.props.idx > 3)
            }, name);
          args.style = {
            height: isFrozen ? this.state.height : 'auto',
            zIndex: this.props.idx
          };
          return React.createElement('div', args, 
              this.props.children);
        }
      });

var parallaxWithContent = React.createElement(Parallax, {index: 0}, 
  React.createElement('img', {className: 'section1', src: 'img/Card1ad.png'}),
/*  React.createElement('img', {className: 'sectionad', src: 'http://www.yaya-wang.com/conde/ad/hp/v5/img/ad-440w.png'}), */
  React.createElement('img', {className: 'section2', src: 'img/Card2c.jpg'}),
  React.createElement('img', {className: 'section2', src: 'img/Card3ad.png'}),
  React.createElement('img', {className: 'content', src: 'img/Feedc.jpg'}));

var content = React.createElement('div', null, 
  React.createElement('img', {src: 'img/nav.png', className: 'head'}),
  React.createElement(Stickybox, null, 
    React.createElement('div', {className: 'nav'}, 
      React.createElement('img', {src: 'img/sticky0.png'})), 
    React.createElement('div', {className: 'mininav'}, 
      React.createElement('img', {src: 'img/sticky.png'}))), 
  parallaxWithContent);

React.render(content, document.getElementById('parallax'));


});
</script>

<style>
  body {
    margin: 0 auto;
    padding-bottom: 6990px;
  }

  .center {
    margin: 0 auto;
    width: 1400px;
  }

  .head {
    z-index: 200;
    position: relative;
    height: 107px;
    width: 1400px;
  }

  .component-stickybox {
    z-index:200;
    position:relative;
    top:-4px;
  }

  .component-stickybox > * {
    margin: 0;
    padding: 0;
    top: 60px;
    width: 1400px;
    background-color: #fff;
  }
      
  .component-stickybox.frozen > * {
    position: fixed;
    top: 0;
    z-index: -1;
    width: 1400px;
    background-color: #fff;
  }
      
  /*    .sectionad {
        width: 1400px;
      }*/
  .nav img{
    box-shadow: 0 4px 5px 0 rgba(85, 85, 85, .1);
  }

  .mininav {
    display: none;
  }

  .frozen .mininav {
    display: block;
    z-index: 999;
    box-shadow: 3px 4px 5px 0 rgba(85, 85, 85, .1);
  }
      
  .section1 {
    box-shadow: 0 4px 5px 0 rgba(85, 85, 85, .25);
  }

  .section2 {
    box-shadow: 0 4px 5px 0 rgba(85, 85, 85, .25);
    top: 10px;
  }

  .content {
    position: relative;
  /*  margin-bottom: -60px; 
  */}


  .parallax {
    position: relative;
    z-index: 100;
    top:-5px;
  }

  .parallax card:first-child {
    top: 176px;
  }

  .component-parallax-card {
    position: absolute;
    top:0;
  }


  .card {
    position: fixed;
    top:64px;
  }

  .card1, .card2, .card3 {
    position: absolute;

  }

  .card1 {
    top: 2442px;
  }

  .card2 {
    top: 1683px;
  }

  .card3 {
    top: 941px;
  }

  .card4 {
    top:0;
  }
</style>
</head>



<body>

  <div class="center">
    <div id="parallax">
    </div>
  </div>

  <div class="content">
  </div>

</body>
</html>